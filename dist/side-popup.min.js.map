{"version":3,"file":"side-popup.min.js","sources":["../src/options.js","../src/functions.js","../src/SidePopup.js"],"sourcesContent":["export default {\r\n    attrs: {\r\n        class: 'modal',\r\n        tabindex: '-1',\r\n    },\r\n    header: {\r\n        show: true,\r\n        tag: 'div',\r\n        showCloseBtn: true,\r\n        attrs: {\r\n            class: 'modal-header',\r\n        },\r\n    },\r\n    body: {\r\n        show: true,\r\n        tag: 'div',\r\n        attrs: {\r\n            class: 'modal-body',\r\n        },\r\n    },\r\n    footer: {\r\n        show: true,\r\n        tag: 'div',\r\n        attrs: {\r\n            class: 'modal-footer',\r\n        },\r\n    },\r\n    buttons: [{\r\n        html: '确定',\r\n        attrs: {\r\n            class: 'btn btn-primary',\r\n            type: 'button',\r\n        },\r\n    }],\r\n};","import $ from 'jquery';\r\n\r\n\r\n/**\r\n * 初始化 modal-dialog\r\n * @param {object} opts \r\n * @returns {jQuery}\r\n */\r\nexport function initDialog(opts) {\r\n    const $content = $('<div class=\"modal-content\"></div>');\r\n    if (opts.header.show) {\r\n        $content.append(initHeader(opts.header));\r\n    }\r\n    if (opts.body.show) {\r\n        $content.append(initBody(opts.body));\r\n    }\r\n    if (opts.footer.show) {\r\n        const $footer = initBody(opts.footer);    // footer 的处理逻辑与 body 一样\r\n        if (opts.buttons) {\r\n            initButtons($footer, opts.buttons);\r\n        }\r\n        $content.append($footer);\r\n    }\r\n    const $dialog = $('<div class=\"modal-dialog\"></div>').append($content);\r\n    if (opts.width) $dialog.css('width', opts.width);\r\n    return $dialog;\r\n}\r\n\r\n\r\n/**\r\n * 初始化 modal-header\r\n * @param {object} opts \r\n * @returns {jQuery}\r\n */\r\nfunction initHeader(opts) {\r\n    let html = `<${opts.tag} ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}>`;\r\n    if (opts.showCloseBtn) {\r\n        html += '<button class=\"close\" data-dismiss=\"modal\" type=\"button\">&times;</button>';\r\n    }\r\n    if (opts.title) {\r\n        html += `<h4 class=\"modal-title\">${opts.title}</h4>`;\r\n    }\r\n    html += `</${opts.tag}>`;\r\n    const $el = $(html);\r\n    if (opts.addedClass) $el.addClass(opts.addedClass);\r\n    if (opts.html) $el.append(opts.html);\r\n    return $el;\r\n}\r\n\r\n\r\n/**\r\n * 初始化 modal-body\r\n * @param {object} opts \r\n * @returns {jQuery}\r\n */\r\nfunction initBody(opts) {\r\n    const $el = $(`<${opts.tag} ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></${opts.tag}>`);\r\n    if (opts.addedClass) $el.addClass(opts.addedClass);\r\n    if (opts.html) $el.append(opts.html);\r\n    return $el;\r\n}\r\n\r\n\r\n/**\r\n * 初始化按钮\r\n * @param {jQuery} $parent 父元素\r\n * @param {object[]} opts \r\n */\r\nfunction initButtons($parent, opts) {\r\n    $.each(opts, (_, item) => {\r\n        const $btn = $(`<button ${$.map(item.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></button>`);\r\n        if (item.addedClass) $btn.addClass(item.addedClass);\r\n        if (item.html) $btn.append(item.html);\r\n        if (item.onClick) $btn.click(item.onClick);\r\n        $parent.append($btn);\r\n    });\r\n}\r\n","import options from './options';\r\nimport $ from 'jquery';\r\nimport styles from './styles.css';\r\nimport {initDialog} from './functions';\r\n\r\n\r\nexport default class SidePopup {\r\n    static id = 'SIDE_POPUP';\r\n    static defaultOptions = options;\r\n\r\n\r\n    constructor(opts) {\r\n        this.options = $.extend(true, opts, options);\r\n        this.element = initDOM(this.options);\r\n        this.element.data(SidePopup.id, this);  // 挂载组件对象到元素上\r\n        this.element.appendTo(document.body);\r\n        if (!$(`style.${SidePopup.id}`).length) {\r\n            appendStyles();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开弹窗（插入到 document 中）\r\n     */\r\n    open() {\r\n        this.element.appendTo(document.body);\r\n        this.element.show();\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭弹窗（从 document 中移除）\r\n     */\r\n    close() {\r\n        this.element.remove();\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示弹窗\r\n     */\r\n    show() {\r\n        this.element.show();\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏弹窗\r\n     */\r\n    hide() {\r\n        this.element.hide();\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开子弹窗\r\n     * @param {object} opts \r\n     */\r\n    openSubPopup(opts) {\r\n        $.extend(true, opts, options);\r\n        this.element.append(initDialog(opts));\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭子弹窗\r\n     */\r\n    closeSubPopup() {\r\n        this.element\r\n            .children('.modal-dialog')\r\n            .not(':first')\r\n            .last()\r\n            .remove();\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开弹窗\r\n     * @param {string|Element|jQuery|object} param \r\n     * @returns {SidePopup}\r\n     */\r\n    static open(param) {\r\n        let popup;\r\n        if (typeof param === 'string' || param instanceof Element || param instanceof $) {\r\n            popup = $(param).data(SidePopup.id);\r\n        } else if (param instanceof Object) {\r\n            popup = new SidePopup(param);\r\n        } else {\r\n            throw new TypeError('错误的参数类型');\r\n        }\r\n        if (popup) {\r\n            popup.open();\r\n            return popup;\r\n        } else {\r\n            throw new Error('组件对象不存在');\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭弹窗\r\n     * @param {string|Element|jQuery} param \r\n     */\r\n    static close(param) {\r\n        const popup = $(param).data(SidePopup.id);\r\n        if (popup) popup.close();\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * 初始化 DOM\r\n * @param {object} opts \r\n * @returns {jQuery}\r\n */\r\nfunction initDOM(opts) {\r\n    const $el = $(`<div ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></div>`);\r\n    $el.addClass(SidePopup.id);\r\n    $el.addClass(opts.type === 'left' ? 'left' : 'right');\r\n    if (opts.addedClass) $el.addClass(opts.addedClass);\r\n    return $el.append(initDialog(opts));\r\n}\r\n\r\n\r\n/**\r\n * 增加样式\r\n */\r\nfunction appendStyles() {\r\n    let html = `<style class=\"ID\" type=\"text/css\">${styles}</style>`;\r\n    html = html.replace(/ID/g, SidePopup.id);\r\n    $(document.body).append(html);\r\n}\r\n"],"names":["attrs","tabindex","header","show","tag","showCloseBtn","body","footer","buttons","html","type","initDialog","opts","$content","$","append","map","v","k","join","title","$el","addedClass","addClass","initHeader","initBody","$footer","$parent","each","_","item","$btn","onClick","click","initButtons","$dialog","width","css","SidePopup","options","extend","element","initDOM","this","data","id","appendTo","document","length","appendStyles","param","popup","Element","Object","TypeError","open","Error","close","remove","hide","children","not","last","replace"],"mappings":"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"}