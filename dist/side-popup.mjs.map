{"version":3,"file":"side-popup.mjs","sources":["../src/options.js","../src/functions.js","../src/SidePopup.js"],"sourcesContent":["export default {\r\n    attrs: {\r\n        class: 'modal',\r\n        tabindex: '-1',\r\n    },\r\n    header: {\r\n        show: true,\r\n        tag: 'div',\r\n        showCloseBtn: true,\r\n        attrs: {\r\n            class: 'modal-header',\r\n        },\r\n    },\r\n    body: {\r\n        show: true,\r\n        tag: 'div',\r\n        attrs: {\r\n            class: 'modal-body',\r\n        },\r\n    },\r\n    footer: {\r\n        show: true,\r\n        tag: 'div',\r\n        attrs: {\r\n            class: 'modal-footer',\r\n        },\r\n    },\r\n    buttons: [{\r\n        html: '确定',\r\n        attrs: {\r\n            class: 'btn btn-primary',\r\n            type: 'button',\r\n        },\r\n    }],\r\n};","import $ from 'jquery';\r\nimport styles from './styles.css';\r\n\r\n\r\n/**\r\n * 初始化 DOM\r\n * @param {SidePopup} instance \r\n * @returns {jQuery}\r\n */\r\nexport function initDOM(instance) {\r\n    const opts = instance.options;\r\n    const $el = $(`<div ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></div>`);\r\n    $el.addClass(instance.constructor.id);\r\n    $el.addClass(opts.type === 'left' ? 'left' : 'right');\r\n    if (opts.addedClass) $el.addClass(opts.addedClass);\r\n    return $el.append(initDialog(opts, instance));\r\n}\r\n\r\n\r\n/**\r\n * 初始化 modal-dialog\r\n * @param {object} opts \r\n * @param {SidePopup} instance \r\n * @returns {jQuery}\r\n */\r\nexport function initDialog(opts, instance) {\r\n    const $content = $('<div class=\"modal-content\"></div>');\r\n    if (opts.header.show) {\r\n        $content.append(initHeader(opts.header, instance));\r\n    }\r\n    if (opts.body.show) {\r\n        $content.append(initBody(opts.body));\r\n    }\r\n    if (opts.footer.show) {\r\n        const $footer = initBody(opts.footer);    // footer 的处理逻辑与 body 一样\r\n        if (opts.buttons) {\r\n            initButtons($footer, opts.buttons);\r\n        }\r\n        $content.append($footer);\r\n    }\r\n    const $dialog = $('<div class=\"modal-dialog\"></div>').append($content);\r\n    if (opts.width) $dialog.css('width', opts.width);\r\n    return $dialog;\r\n}\r\n\r\n\r\n/**\r\n * 初始化 modal-header\r\n * @param {object} opts \r\n * @param {SidePopup} instance \r\n * @returns {jQuery}\r\n */\r\nfunction initHeader(opts, instance) {\r\n    const $header = $(`<${opts.tag} ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></${opts.tag}>`);\r\n    if (opts.showCloseBtn) {\r\n        const $btn = $('<button class=\"close\" type=\"button\">&times;</button>');\r\n        if (instance) {\r\n            $btn.click(_ => instance.close());\r\n        } else {\r\n            $btn.click(function () {\r\n                $header.parent().parent().remove();\r\n            });\r\n        }\r\n        $header.append($btn);\r\n    }\r\n    if (opts.title) {\r\n        $header.append(`<h4 class=\"modal-title\">${opts.title}</h4>`);\r\n    }\r\n    if (opts.addedClass) $header.addClass(opts.addedClass);\r\n    if (opts.html) $header.append(opts.html);\r\n    return $header;\r\n}\r\n\r\n\r\n/**\r\n * 初始化 modal-body\r\n * @param {object} opts \r\n * @returns {jQuery}\r\n */\r\nfunction initBody(opts) {\r\n    const $el = $(`<${opts.tag} ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></${opts.tag}>`);\r\n    if (opts.addedClass) $el.addClass(opts.addedClass);\r\n    if (opts.html) $el.append(opts.html);\r\n    return $el;\r\n}\r\n\r\n\r\n/**\r\n * 初始化按钮\r\n * @param {jQuery} $parent 父元素\r\n * @param {object[]} opts \r\n */\r\nfunction initButtons($parent, opts) {\r\n    $.each(opts, (_, item) => {\r\n        const $btn = $(`<button ${$.map(item.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></button>`);\r\n        if (item.addedClass) $btn.addClass(item.addedClass);\r\n        if (item.html) $btn.append(item.html);\r\n        if (item.onClick) $btn.click(item.onClick);\r\n        $parent.append($btn);\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * 增加样式\r\n * @param {string} id \r\n */\r\nexport function appendStyles(id) {\r\n    let html = `<style class=\"ID\" type=\"text/css\">${styles}</style>`;\r\n    html = html.replace(/ID/g, id);\r\n    $(document.body).append(html);\r\n}","import options from './options';\r\nimport $ from 'jquery';\r\nimport {initDOM, initDialog, appendStyles} from './functions';\r\n\r\n\r\nexport default class SidePopup {\r\n    static id = 'SIDE_POPUP';\r\n    static defaultOptions = options;\r\n\r\n\r\n    constructor(opts) {\r\n        this.options = $.extend(true, opts, options);\r\n        this.element = initDOM(this);\r\n        this.element.data(SidePopup.id, this);  // 挂载组件对象到元素上\r\n        this.element.appendTo(document.body);\r\n        if (!$(`style.${SidePopup.id}`).length) {\r\n            appendStyles(SidePopup.id);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开弹窗（插入到 document 中）\r\n     */\r\n    open() {\r\n        this.element.appendTo(document.body);\r\n        this.element.show();\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭弹窗（从 document 中移除）\r\n     */\r\n    close() {\r\n        this.element.remove();\r\n        this.element\r\n            .children('.modal-dialog')\r\n            .not(':first')\r\n            .remove();\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示弹窗\r\n     */\r\n    show() {\r\n        this.element.show();\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏弹窗\r\n     */\r\n    hide() {\r\n        this.element.hide();\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开子弹窗\r\n     * @param {object} opts \r\n     */\r\n    openSubPopup(opts) {\r\n        $.extend(true, opts, options);\r\n        this.element.append(initDialog(opts));\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭子弹窗\r\n     */\r\n    closeSubPopup() {\r\n        this.element\r\n            .children('.modal-dialog')\r\n            .not(':first')\r\n            .last()\r\n            .remove();\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开弹窗\r\n     * @param {string|Element|jQuery|object} param \r\n     * @returns {SidePopup}\r\n     */\r\n    static open(param) {\r\n        let popup;\r\n        if (typeof param === 'string' || param instanceof Element || param instanceof $) {\r\n            popup = $(param).data(SidePopup.id);\r\n        } else if (param instanceof Object) {\r\n            popup = new SidePopup(param);\r\n        } else {\r\n            throw new TypeError('错误的参数类型');\r\n        }\r\n        if (popup) {\r\n            popup.open();\r\n            return popup;\r\n        } else {\r\n            throw new Error('组件对象不存在');\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭弹窗\r\n     * @param {string|Element|jQuery} param \r\n     */\r\n    static close(param) {\r\n        const popup = $(param).data(SidePopup.id);\r\n        if (popup) popup.close();\r\n    }\r\n}\r\n"],"names":["attrs","class","tabindex","header","show","tag","showCloseBtn","body","footer","buttons","html","type","initDOM","instance","opts","options","$el","$","map","v","k","join","addClass","constructor","id","addedClass","append","initDialog","$content","initHeader","initBody","$footer","initButtons","$dialog","width","css","$header","$btn","click","_","close","parent","remove","title","$parent","each","item","onClick","appendStyles","styles","replace","document","SidePopup","extend","element","data","appendTo","length","open","children","not","hide","openSubPopup","closeSubPopup","last","param","popup","Element","Object","TypeError","Error"],"mappings":"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"}