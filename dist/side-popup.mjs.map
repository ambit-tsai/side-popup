{"version":3,"file":"side-popup.mjs","sources":["../src/options.js","../src/functions.js","../src/SubPopup.js","../src/SidePopup.js"],"sourcesContent":["export default {\r\n    backdrop: false,\r\n    attrs: {\r\n        class: 'modal-dialog',\r\n    },\r\n    header: {\r\n        show: true,\r\n        tag: 'div',\r\n        showCloseBtn: true,\r\n        attrs: {\r\n            class: 'modal-header',\r\n        },\r\n    },\r\n    body: {\r\n        show: true,\r\n        tag: 'div',\r\n        attrs: {\r\n            class: 'modal-body',\r\n        },\r\n    },\r\n    footer: {\r\n        show: true,\r\n        tag: 'div',\r\n        attrs: {\r\n            class: 'modal-footer',\r\n        },\r\n    },\r\n    buttons: [{\r\n        html: '确定',\r\n        attrs: {\r\n            class: 'btn btn-primary',\r\n            type: 'button',\r\n        },\r\n    }],\r\n};","import $ from 'jquery';\r\nimport styles from './styles.css';\r\n\r\n\r\n/**\r\n * 初始化 modal-dialog\r\n * @param {SidePopup|SubPopup} instance\r\n * @returns {jQuery}\r\n */\r\nexport function initDialog(instance) {\r\n    const opts = instance.options;\r\n    const $content = $('<div class=\"modal-content\"></div>');\r\n    if (opts.header.show) {\r\n        $content.append(initHeader(instance));\r\n    }\r\n    if (opts.body.show) {\r\n        $content.append(initBody(opts.body));\r\n    }\r\n    if (opts.footer.show) {\r\n        const $footer = initBody(opts.footer);    // footer 的初始化逻辑与 body 一样\r\n        if (opts.buttons) {\r\n            initButtons($footer, opts.buttons);\r\n        }\r\n        $content.append($footer);\r\n    }\r\n\r\n    const $dialog = $(`<div ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></div>`);\r\n    if (opts.width) $dialog.css('width', opts.width);\r\n    if (opts.addedClass) $el.addClass(opts.addedClass);\r\n    return $dialog.append($content);\r\n}\r\n\r\n\r\n/**\r\n * 初始化 modal-header\r\n * @param {SubPopup} instance\r\n * @returns {jQuery}\r\n */\r\nfunction initHeader(instance) {\r\n    const opts = instance.options.header;\r\n    const $header = $(`<${opts.tag} ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></${opts.tag}>`);\r\n    if (opts.showCloseBtn) {\r\n        const $btn = $('<button class=\"close\" type=\"button\">&times;</button>');\r\n        $btn.click(_ => instance.close());\r\n        $header.append($btn);\r\n    }\r\n    if (opts.title) {\r\n        $header.append(`<h4 class=\"modal-title\">${opts.title}</h4>`);\r\n    }\r\n    if (opts.addedClass) $header.addClass(opts.addedClass);\r\n    if (opts.html) $header.append(opts.html);\r\n    return $header;\r\n}\r\n\r\n\r\n/**\r\n * 初始化 modal-body\r\n * @param {object} opts \r\n * @returns {jQuery}\r\n */\r\nfunction initBody(opts) {\r\n    const $el = $(`<${opts.tag} ${$.map(opts.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></${opts.tag}>`);\r\n    if (opts.addedClass) $el.addClass(opts.addedClass);\r\n    if (opts.html) $el.append(opts.html);\r\n    return $el;\r\n}\r\n\r\n\r\n/**\r\n * 初始化按钮\r\n * @param {jQuery} $parent 父元素\r\n * @param {object[]} opts \r\n */\r\nfunction initButtons($parent, opts) {\r\n    $.each(opts, (_, item) => {\r\n        const $btn = $(`<button ${$.map(item.attrs, (v, k) => `${k}=\"${v}\"`).join(' ')}></button>`);\r\n        if (item.addedClass) $btn.addClass(item.addedClass);\r\n        if (item.html) $btn.append(item.html);\r\n        if (item.onClick) $btn.click(item.onClick);\r\n        $parent.append($btn);\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * 增加样式\r\n * @param {string} id \r\n */\r\nexport function appendStyles(id) {\r\n    let html = `<style class=\"ID\" type=\"text/css\">${styles}</style>`;\r\n    html = html.replace(/ID/g, id);\r\n    $(document.body).append(html);\r\n}\r\n\r\n\r\n/**\r\n * 初始化 SidePopup\r\n * @param {SidePopup} instance \r\n * @returns {jQuery}\r\n */\r\nexport function initSidePopup(instance) {\r\n    const opts = instance.options;\r\n    const id = instance.constructor.id;\r\n    const $el = $(`<div class=\"modal fade\" tabindex=\"-1\"></div>`);\r\n    $el.addClass(id);\r\n    $el.addClass(opts.type === 'left' ? 'left' : 'right');\r\n    if (opts.backdrop) {\r\n        $el.click(function (event) {\r\n            if (this !== event.target) return;\r\n            if (instance._subPopupList.length) {\r\n                instance.closeSubPopup();\r\n            } else {\r\n                instance.close();\r\n            }\r\n        });\r\n    }\r\n\r\n    const $dialog = initDialog(instance);\r\n    $dialog.data(id, instance); // 挂载组件实例到弹窗上\r\n    return $el.append($dialog);\r\n}\r\n\r\n\r\n/**\r\n * 等待渲染\r\n * @param {function} fn \r\n */\r\nexport function waitForRender(fn) {\r\n    if (Promise) {\r\n        Promise.resolve().then(fn)\r\n    } else {\r\n        setTimeout(fn);\r\n    }\r\n}","import options from './options';\r\nimport {initDialog} from './functions';\r\n\r\n\r\nexport default class SubPopup {\r\n    options;\r\n    element;\r\n\r\n\r\n    constructor(opts) {\r\n        this.options = $.extend(true, {}, options, opts);\r\n        this.element = initDialog(this);\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭弹窗（从 document 中移除）\r\n     */\r\n    close() {\r\n        this.element.remove();\r\n    }\r\n}","import options from './options';\r\nimport $ from 'jquery';\r\nimport {appendStyles, initSidePopup, waitForRender} from './functions';\r\nimport SubPopup from './SubPopup';\r\n\r\n\r\nexport default class SidePopup {\r\n    static id = 'SIDE_POPUP';\r\n    static defaultOptions = options;\r\n    options;\r\n    element;\r\n    _subPopupList = [];\r\n\r\n\r\n    constructor(opts) {\r\n        if (!$(`style.${SidePopup.id}`).length) {\r\n            appendStyles(SidePopup.id);         // 添加样式\r\n        }\r\n        this.options = $.extend(true, {}, options, opts);\r\n        this.element = initSidePopup(this);\r\n        this.element.appendTo(document.body);\r\n        if (typeof opts.afterRender === 'function') {\r\n            waitForRender(opts.afterRender);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开弹窗（插入到 document 中）\r\n     */\r\n    open() {\r\n        this.show();\r\n        this.element.appendTo(document.body);\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭弹窗（从 document 中移除）\r\n     */\r\n    close() {\r\n        this.element.remove();\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示弹窗\r\n     */\r\n    show() {\r\n        this.element.addClass('in');\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏弹窗\r\n     */\r\n    hide() {\r\n        this.element.removeClass('in');\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开子弹窗\r\n     * @param {object} opts \r\n     */\r\n    openSubPopup(opts) {\r\n        const subPopup = new SubPopup(opts);\r\n        this._subPopupList.push(subPopup);\r\n        this.element.append(subPopup.element);\r\n        if (typeof opts.afterRender === 'function') {\r\n            waitForRender(opts.afterRender);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭子弹窗\r\n     */\r\n    closeSubPopup() {\r\n        const subPopup = this._subPopupList.pop();\r\n        if (subPopup) subPopup.close();\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开弹窗\r\n     * @param {string|Element|jQuery|object} param \r\n     * @returns {SidePopup}\r\n     */\r\n    static open(param) {\r\n        let popup;\r\n        if (typeof param === 'string' || param instanceof Element || param instanceof $) {\r\n            popup = $(param).data(SidePopup.id);\r\n        } else if (param instanceof Object) {\r\n            popup = new SidePopup(param);\r\n        } else {\r\n            throw new TypeError('错误的参数类型');\r\n        }\r\n        if (popup) {\r\n            popup.open();\r\n            return popup;\r\n        } else {\r\n            throw new Error('组件对象不存在');\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭弹窗\r\n     * @param {string|Element|jQuery} param \r\n     */\r\n    static close(param) {\r\n        const popup = $(param).data(SidePopup.id);\r\n        if (popup) popup.close();\r\n    }\r\n}\r\n"],"names":["backdrop","attrs","class","header","show","tag","showCloseBtn","body","footer","buttons","html","type","initDialog","instance","opts","options","$content","$","append","initHeader","initBody","$footer","initButtons","$dialog","map","v","k","join","width","css","addedClass","$el","addClass","$header","$btn","click","_","close","title","$parent","each","item","onClick","appendStyles","id","styles","replace","document","initSidePopup","constructor","event","target","_subPopupList","length","closeSubPopup","data","waitForRender","fn","Promise","resolve","then","setTimeout","SubPopup","extend","element","remove","SidePopup","appendTo","afterRender","open","hide","removeClass","openSubPopup","subPopup","push","pop","param","popup","Element","Object","TypeError","Error"],"mappings":"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"}